<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesture Control</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="robotic-hand.png">
</head>
<body>

    <div class="cyber-overlay"></div>
    <div class="scanlines"></div>

    <header style="display: flex; justify-content: space-between; align-items: center; padding: 10px 20px 10px 30px; border-bottom: 2px solid rgba(255,255,255,0.1); margin-bottom: 15px; height: 60px;">

        <h1 style="color: white; font-family: var(--font-main); letter-spacing: 2px; margin: 0; font-size: 28px; display: flex; align-items: center; height: 100%;">GESTURE CONTROL</h1>
        <div id="camera-status" class="cyber-cam-status online" style="font-size: 28px; padding: 0 15px; display: flex; align-items: center; gap: 15px; height: 100%; background: transparent; border: none; font-weight: bold; letter-spacing: 2px;">
            <span id="cam-dot" class="cam-dot-online" style="width: 14px; height: 14px;"></span>
            <span id="cam-text">CAM ONLINE</span>
        </div>
    </header>

    <div class="container">

        <div class="section-container">
            <div class="section-header">
                <h2>GAMES</h2>
                <span class="subtitle">INSTALLED MODULES</span>
                <p>Select a game module below.</p>
            </div>

            <div class="grid-container">
                <div class="card cyber-card red" onclick="runShooter()">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <h2>SHOOTING RANGE</h2>
                        <p>[ MODULE_01 ]</p>
                        <div class="tutorial-btn" onclick="openTutorial('Shooter', event)">[ ? ]</div>
                    </div>
                </div>

                <div class="card cyber-card purple" onclick="runKatana()">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <h2>KARATE CHOP</h2>
                        <p>[ MODULE_02 ]</p>
                        <div class="tutorial-btn" onclick="openTutorial('Karate', event)">[ ? ]</div>
                    </div>
                </div>

                <div class="card cyber-card cyan" onclick="runBubble()">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <h2>BUBBLE CATCHER</h2>
                        <p>[ MODULE_03 ]</p>
                        <div class="tutorial-btn" onclick="openTutorial('Bubble', event)">[ ? ]</div>
                    </div>
                </div>

                <div class="card cyber-card red" onclick="runRPS()">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <h2>R.P.S. GAME</h2>
                        <p>[ MODULE_04 ]</p>
                        <div class="tutorial-btn" onclick="openTutorial('RPS', event)">[ ? ]</div>
                    </div>
                </div>

                <div class="card cyber-card purple" onclick="runMeme()">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <h2>MEME MATCH</h2>
                        <p>[ MODULE_05 ]</p>
                        <div class="tutorial-btn" onclick="openTutorial('Meme', event)">[ ? ]</div>
                    </div>
                </div>

                <div class="card cyber-card cyan" onclick="runCanvas()">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <h2>AIR CANVAS</h2>
                        <p>[ MODULE_06 ]</p>
                        <div class="tutorial-btn" onclick="openTutorial('Canvas', event)">[ ? ]</div>
                    </div>
                </div>

        </div>

        <div class="section-container" style="margin-top: 25px;">
            <div class="section-header">
                <h2>FEATURES</h2>
                <p>Toggle cybernetic systems on or off.</p>
            </div>

            <div class="grid-container">
                <div class="card cyber-card cyan feature-card">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <div class="tutorial-btn" onclick="openTutorial('Volume', event)">[ ? ]</div>
                        <h2>VOLUME CONTROL</h2>
                        <p>[ F_01 ]</p>
                        <label class="cyber-switch">
                            <input type="checkbox" onchange="runVolume()" id="volumeToggle">
                            <span class="slider cyan-glow"></span>
                        </label>
                    </div>
                </div>
                <div class="card cyber-card red feature-card">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <div class="tutorial-btn" onclick="openTutorial('SmartWatch', event)">[ ? ]</div>
                        <h2>SMARTWATCH</h2>
                        <p>[ F_02 ]</p>
                        <label class="cyber-switch">
                            <input type="checkbox" onchange="runSmartWatch()" id="smartwatchToggle">
                            <span class="slider cyan-glow"></span>
                        </label>
                    </div>
                </div>
                <div class="cyber-card cyan">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <div class="tutorial-btn" onclick="openTutorial('Mouse', event)">[ ? ]</div>
                        <h2>MOUSE CONTROL</h2>
                        <p>[ F_03 ]</p>
                        <label class="cyber-switch">
                        <input type="checkbox" id="mouseToggle" onchange="runMouse()">
                        <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="card cyber-card purple" onclick="runCameraView()">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <h2>CAMERA VIEW</h2>
                        <p>[ SYS_CALIBRATE ]</p>
                    </div>
                </div>

                <div class="cyber-card red">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <div class="tutorial-btn" onclick="openTutorial('Presentation', event)">[ ? ]</div>
                        <h2>PRESENTATION SWIPE</h2>
                        <p>[ F_04 ]</p>
                        <label class="cyber-switch">
                        <input type="checkbox" id="presentationToggle" onchange="runPresentation()">
                        <span class="slider"></span>
                        </label>
                    </div>
                </div>

                <div class="cyber-card purple">
                    <div class="card-deco top-left"></div>
                    <div class="card-content">
                        <div class="tutorial-btn" onclick="openTutorial('Macro', event)">[ ? ]</div>
                        <h2>MACRO LINKS</h2>
                        <p style="cursor: pointer; color: var(--neon-purple);" onclick="openMacroConfig()">[ CONFIGURE ]</p>
                        <label class="cyber-switch">
                        <input type="checkbox" id="macroToggle" onchange="runMacros()">
                        <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>

        </div>
    </div>

        <div class="footer">
            <p class="tech-tip">:: SYSTEM_TIP :: Tap wrist to activate chronometer (if available).</p>
            <button class="exit-btn cyber-button" onclick="window.close()">
                <span class="btn-text">DISCONNECT SYSTEM</span>
            </button>
        </div>
    </div>

    <div id="gameModal" class="modal-overlay hidden" style="z-index: 2000;">
        <div class="cyber-card purple" style="width: 90vw; height: 90vh; max-width: none; display: flex; flex-direction: column; padding: 20px;">
            <div class="card-deco top-left"></div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid var(--neon-purple); padding-bottom: 10px;">
                <h2 id="gameTitle" style="color: var(--neon-purple); margin: 0; font-size: 28px; letter-spacing: 2px;">[ IN GAME ]</h2>
                <div style="color: #ff5555; font-weight: bold; font-size: 18px; border: 1px solid #ff5555; padding: 5px 15px; border-radius: 4px; animation: pulse-red 2s infinite;">
                    Stiskni 'Q' pro okam≈æit√© ukonƒçen√≠
                </div>
            </div>

            <div style="flex: 1; overflow: hidden; border: 2px solid rgba(255,255,255,0.1); border-radius: 5px; position: relative; background: #000;">
                <img id="game-stream" src="" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
        </div>
    </div>
    <div id="cameraModal" class="modal-overlay hidden" onclick="closeModalOnOutsideClick(event)">
        <div class="modal-content cyber-card red">
            <h2 style="color: var(--neon-red); text-shadow: 0 0 10px var(--neon-red);">[ CRITICAL ERROR ]</h2>
            <h3>OPTICAL SENSOR NOT FOUND</h3>

            <div class="terminal-text-container">
                <div class="terminal-text">
                    <p>> Gesture tracking initialization failed...</p>
                    <p>> Connection diagnostics suggest solutions:</p>
                    <ul>
                        <li>Physically check USB camera connection.</li>
                        <li>Ensure camera is not blocked by another app (Zoom, Teams, etc.).</li>
                        <li>Enable camera access in Windows Privacy Settings.</li>
                    </ul>
                </div>
            </div>

            <button class="cyber-button close-modal-btn" onclick="closeModal()">
                <span class="btn-text">END DIAGNOSTICS</span>
            </button>
        </div>
    </div>

    <div id="cameraPreviewModal" class="modal-overlay hidden">
        <div class="modal-content cyber-card purple" style="max-width: 700px; text-align: center;">
            <div class="card-deco top-left"></div>
            <h2 style="color: var(--neon-purple); margin-bottom: 10px;">[ ALIGNMENT FEED ]</h2>
            <p style="color: rgba(224, 247, 255, 0.6); margin-bottom: 20px;">Please align your body and face within the center frame.</p>

            <div style="position: relative; display: inline-block; border: 2px solid var(--neon-purple); border-radius: 5px; overflow: hidden; background: #000; min-height: 480px; width: 640px;">
                <img id="cam-preview" src="" style="width: 100%; height: 100%; display: block;">
            </div>

            <button class="cyber-button" onclick="closeCameraView()" style="margin-top: 25px; border-color: var(--neon-purple); color: var(--neon-purple);">
                <span class="btn-text">CLOSE & SAVE ALIGNMENT</span>
            </button>
        </div>
    </div>
    <div id="macroConfigModal" class="modal-overlay hidden">
        <div class="modal-content cyber-card purple" style="max-width: 500px; text-align: left;">
            <div class="card-deco top-left"></div>
            <h2 style="color: var(--neon-purple); margin-bottom: 15px;">[ MACRO CONFIGURATION ]</h2>
            <p style="color: rgba(224, 247, 255, 0.6); margin-bottom: 20px;">Assign URLs or App paths to hand gestures.</p>

            <label style="color: white; font-size: 12px;">‚úåÔ∏è VICTORY GESTURE:</label>
            <input type="text" id="link1" placeholder="www.youtube.com" style="background: #111; border: 1px solid var(--neon-purple); color: white; padding: 10px; width: 100%; margin-bottom: 15px; box-sizing: border-box; font-family: var(--font-main);">

            <label style="color: white; font-size: 12px;">üëç THUMBS UP GESTURE:</label>
            <input type="text" id="link2" placeholder="www.google.com" style="background: #111; border: 1px solid var(--neon-purple); color: white; padding: 10px; width: 100%; margin-bottom: 15px; box-sizing: border-box; font-family: var(--font-main);">

            <label style="color: white; font-size: 12px;">ü§ò ROCK ON GESTURE:</label>
            <input type="text" id="link3" placeholder="netflix.com" style="background: #111; border: 1px solid var(--neon-purple); color: white; padding: 10px; width: 100%; margin-bottom: 25px; box-sizing: border-box; font-family: var(--font-main);">

            <button class="cyber-button" onclick="saveMacroConfig()" style="border-color: var(--neon-purple); color: var(--neon-purple); width: 100%;">
            SAVE & APPLY
            </button>
        </div>
    </div>

    <div id="tutorialModal" class="modal-overlay hidden" style="z-index: 5000;" onclick="closeTutorialOnOutsideClick(event)">
        <div class="modal-content cyber-card cyan" style="max-width: 500px; text-align: left;">
            <div class="card-deco top-left"></div>
            <h2 id="tutTitle" style="color: var(--neon-cyan); margin-bottom: 15px; border-bottom: 1px solid rgba(0,243,255,0.3); padding-bottom: 10px;">
                [ MODULE NAME ]
            </h2>

            <div class="terminal-text-container" style="background: rgba(0,243,255,0.05); border-color: rgba(0,243,255,0.2);">
                <div class="terminal-text" style="border-left-color: var(--neon-cyan); color: white;">
                    <p id="tutText" style="font-size: 16px; line-height: 1.5; margin: 0;">
                        text
                    </p>
                </div>
            </div>

            <button class="cyber-button" onclick="closeTutorial()" style="border-color: var(--neon-cyan); color: var(--neon-cyan); align-self: flex-end; margin-top: 10px;">
                CLOSE TUTORIAL
            </button>
        </div>
    </div>

    <div id="scoreModal" class="modal-overlay hidden" style="z-index: 3000;">
        <div class="modal-content cyber-card cyan" style="max-width: 500px; text-align: center;">
            <div class="card-deco top-left"></div>
            <h2 style="color: var(--neon-cyan); margin-bottom: 15px;">[ GAME OVER ]</h2>
            <h1 id="finalScoreDisplay" style="color: white; font-size: 36px; margin: 10px 0;">SCORE: 0</h1>

            <div style="margin: 20px 0; text-align: left;">
                <label style="color: var(--neon-cyan); font-size: 12px;">PLAYER NAME:</label>
                <input type="text" id="playerName" placeholder="Enter your name" style="background: #111; border: 1px solid var(--neon-cyan); color: white; padding: 10px; width: 100%; margin-bottom: 15px; font-family: var(--font-main);">

                <label style="color: var(--neon-cyan); font-size: 12px;">CLASS (Optional):</label>
                <input type="text" id="playerClass" placeholder="e.g. 4.B" style="background: #111; border: 1px solid var(--neon-cyan); color: white; padding: 10px; width: 100%; margin-bottom: 15px; font-family: var(--font-main);">
            </div>

            <button class="cyber-button" onclick="submitScore()" style="border-color: var(--neon-cyan); color: var(--neon-cyan); width: 100%; margin-bottom: 20px;">
                SAVE SCORE TO LEADERBOARD
            </button>

            <div id="leaderboardContainer" style="text-align: left; background: rgba(0,243,255,0.05); padding: 15px; border: 1px solid rgba(0,243,255,0.2);">
                <h3 style="color: var(--neon-cyan); margin-top: 0; border-bottom: 1px solid rgba(0,243,255,0.3); padding-bottom: 5px;">TOP SCORES</h3>
                <ul id="leaderboardList" style="list-style: none; padding: 0; color: white; font-size: 14px; margin: 0;">
                    </ul>
            </div>

            <button class="cyber-button" onclick="closeScoreModal()" style="border-color: #ff5555; color: #ff5555; width: 100%; margin-top: 15px;">
                SKIP & CLOSE
            </button>
        </div>
    </div>
    <script type="text/javascript" src="/eel.js"></script>
    <div id="smartwatchOverlay" class="hidden" style="position: fixed; bottom: 30px; right: 30px; z-index: 9999; background: rgba(5, 5, 10, 0.9); border: 2px solid var(--neon-cyan); border-radius: 8px; padding: 15px 30px; box-shadow: 0 0 20px rgba(0,243,255,0.4); text-align: center; backdrop-filter: blur(5px); transition: opacity 0.3s ease;">
        <div style="font-size: 10px; color: var(--neon-cyan); letter-spacing: 3px; margin-bottom: 5px;">[ LOCAL SYSTEM TIME ]</div>
        <div id="smartwatchTime" style="font-size: 45px; color: white; font-family: var(--font-header); text-shadow: 0 0 15px var(--neon-cyan); margin: 0; line-height: 1;">
            00:00
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>